<!-- 链式运动 -->
<!DOCTYPE html>
<html>
<head>
	<title>链式运动</title>
	<meta charset="utf-8">
	<style type="text/css">
	*{padding: 0;margin:0;}
	ul,li{list-style: none;}
	ul li{width: 200px;
		height: 100px;
		background: yellow;
		margin-bottom: 20px;
	    border:4px solid #000;
        filter:alpha(opacity:30);
        opacity:0.3;}
	</style>
	<script type="text/javascript">

/*		function startMove(obj,attr,target,fn){
			clearInterval(obj.timer); 
			obj.timer=setInterval(function(){
					//1取当前值
					var icur=0;
					if (attr=='opacity') {
						icur=parseFloat(getStyle(obj,attr))*100;
					} else {
						icur=parseInt(getStyle(obj,attr));
					}
					//2算速度
					var speed=(target-icur)/8;
					speed=speed>0?Math.ceil(speed):Math.floor(speed);//清除小数
					//3检测停止,没有判断所有的都到达终点
					if (icur==target) {
						clearInterval(obj.timer);
						if (fn) {
							fn();
			    		} 
					} else {
						if (attr=='opacity') {
						obj.style.filter='alpha(opacity:'+(icur+speed)+')';
						obj.style.opacity=(icur+speed)/100;
					} else {
						obj.style[attr]=icur+speed+'px';
					} 
					}		
		    },30);
		}
	//获取属性方法
		function getStyle(obj,attr){
		 	if (obj.currentStyle) {
		 		return obj.currentStyle[attr];//针对IE浏览器	
		 	} else {
		 		return getComputedStyle(obj,false)[attr];//针对火狐浏览器
		 	}
	 	}

		window.onload=function(){
			var Li=document.getElementById('li1');
			Li.onmouseover=function(){
				startMove(Li,'width',400,function(){
					startMove(Li,'height',200,function(){
						startMove(Li,'opacity',100);
					});
				});
			};

			Li.onmouseout=function(){
				startMove(Li,'opacity',30,function(){
					startMove(Li,'height',100,function(){
						startMove(Li,'width',200);
					});
				});
			};
		};*/
	window.onload=function(){
		var oLi=document.getElementById('li1');
		oLi.onmouseover=function(){
			startMove(oLi,'width',400,function(){
				startMove(oLi,'height',200,function(){
					startMove(oLi,'opacity',100);
				})
			})
		};
		
		oLi.onmouseout=function(){
			startMove(oLi,'opacity',30,function(){
				startMove(oLi,'height',100,function(){
					startMove(oLi,'width',200);
				})
			})
		}
		
		//var timer=null;
		function startMove(obj,attr,target,fn){
		clearInterval(obj.timer);
			var oLi=document.getElementById('li1');
			obj.timer=setInterval(function(){
			//获取当前值
			var icur=0;
			if(attr=='opacity'){
				icur=parseFloat(getStyle(obj,attr))*100;
			}else{
				icur=parseInt(getStyle(oLi,attr));
			}
		
			var speed=(target-icur)/8;
			speed=speed>0?Math.ceil(speed):Math.floor(speed);
			//判断是否达到目标值
			if(icur==target){
			clearInterval(obj.timer);
			if(fn){
				fn();
			}
			}else{
			
				if(attr=='opacity'){
				obj.style.filter='alpha(opacity:'+(icur+speed)+')';
				obj.style.opacity=(icur+speed)/100;
				}else{
				oLi.style[attr]=icur+speed+"px";
				}
			
			}
			},30);
		}
		

	
	
	
	function getStyle(obj,attr){
		 	if (obj.currentStyle) {
		 		return obj.currentStyle[attr];//针对IE浏览器	
		 	} else {
		 		return getComputedStyle(obj,false)[attr];//针对火狐浏览器
		 	}
	 	}
}
	</script>
</head>
	<body>
<ul>
	<li id="li1"></li>
</ul>
</body>
</html>